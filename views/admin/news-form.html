<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ—Å—Ç—å ‚Äî –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</title>
    <link rel="stylesheet" href="/style.css">
    <link rel="stylesheet" href="/admin.css">
    <link rel="icon" type="image/png" href="/images/logo.png">
</head>

<body>
    <nav class="navbar">
        <div class="navbar-container container">
            <a href="/" class="logo">21-<span>IDUM</span></a>
            <ul class="nav-links">
                <li><a href="/admin/news">‚Üê –ù–∞–∑–∞–¥ –∫ –Ω–æ–≤–æ—Å—Ç—è–º</a></li>
            </ul>
        </div>
    </nav>

    <section class="admin-wrap">
        <div class="admin-content" style="max-width: 1000px; margin: 0 auto; width: 100%;">
            <h1 id="pageTitle" style="margin:0 0 8px">–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ—Å—Ç—å</h1>
            <p class="muted" style="margin:0 0 20px">–ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É –Ω–∞ —Ä—É—Å—Å–∫–æ–º –∏ —É–∑–±–µ–∫—Å–∫–æ–º —è–∑—ã–∫–∞—Ö</p>

            <div id="errorBox" class="error"></div>
            <div id="successBox" class="success"></div>

            <form id="newsForm">
                <div class="form-tabs">
                    <div class="form-tab active" data-lang="ru">üá∑üá∫ –†—É—Å—Å–∫–∏–π</div>
                    <div class="form-tab" data-lang="uz">üá∫üáø O'zbekcha</div>
                </div>

                <div class="lang-content active" data-lang="ru">
                    <div class="form-group">
                        <label for="title_ru">–ó–∞–≥–æ–ª–æ–≤–æ–∫ *</label>
                        <input type="text" id="title_ru" name="title_ru" required>
                    </div>
                    <div class="form-group">
                        <label for="body_ru">–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ *</label>
                        <textarea id="body_ru" name="body_ru" required style="min-height: 300px;"></textarea>
                    </div>
                </div>

                <div class="lang-content" data-lang="uz">
                    <div class="form-group">
                        <label for="title_uz">Sarlavha</label>
                        <input type="text" id="title_uz" name="title_uz">
                    </div>
                    <div class="form-group">
                        <label for="body_uz">Mazmuni</label>
                        <textarea id="body_uz" name="body_uz" style="min-height: 300px;"></textarea>
                    </div>
                </div>

                <div class="form-group">
                    <label for="coverImage">–û–±–ª–æ–∂–∫–∞ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</label>
                    <input type="file" id="coverImage" name="coverImage" accept="image/*" style="display:none"
                        data-max-size="5242880" data-min-width="600" data-min-height="400">
                    <div class="file-drop-area" data-filedrop="coverImage" style="margin-top:6px;">
                        <div class="file-instructions">
                            –ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—é–¥–∞ –∏–ª–∏ <strong>–Ω–∞–∂–º–∏—Ç–µ –Ω–∞ –ø–æ–ª–µ</strong>
                        </div>
                    </div>
                    <div class="file-name" data-filedrop-name="coverImage" style="margin-top:6px">–§–∞–π–ª –Ω–µ –≤—ã–±—Ä–∞–Ω</div>
                    <div class="text-sm muted" style="margin-top:6px">–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Ä–∞–∑–º–µ—Ä: 1200x630. –ú–∞–∫—Å: 5MB.
                        –§–æ—Ä–º–∞—Ç—ã: JPEG, PNG, WebP.</div>
                    <div id="imagePreview" style="margin-top:10px; display:none;">
                        <img id="previewImg" src=""
                            style="max-width:200px; border-radius:8px; border:1px solid #e5e7eb;">
                        <button type="button" id="removeImage" class="btn btn-secondary"
                            style="margin-left:10px; padding:6px 12px;">–£–¥–∞–ª–∏—Ç—å</button>
                    </div>
                    <input type="hidden" id="coverUrl" name="coverUrl">
                </div>

                <div class="form-group">
                    <label for="status">–°—Ç–∞—Ç—É—Å</label>
                    <select id="status" name="status">
                        <option value="draft">–ß–µ—Ä–Ω–æ–≤–∏–∫</option>
                        <option value="published">–û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ</option>
                    </select>
                </div>

                <div class="actions">
                    <button type="submit" class="btn" id="saveBtn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                    <button type="button" class="btn btn-secondary"
                        onclick="window.location.href='/admin/news'">–û—Ç–º–µ–Ω–∞</button>
                </div>
            </form>
        </div>
        </div>
    </section>

    <script src="/csrf-helper.js"></script>
    <script src="/upload-utils.js"></script>
    <script src="/admin-filedrop.js"></script>
    <script src="/rich-editor.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Initialize file drop
            if (window.initFileDrop) {
                initFileDrop('coverImage');
            }

            // Initialize rich text editors
            if (window.initializeRichEditor) {
                initializeRichEditor('body_ru', '–ù–∞–ø–∏—à–∏—Ç–µ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç–∏ –Ω–∞ —Ä—É—Å—Å–∫–æ–º...');
                initializeRichEditor('body_uz', 'O\'zbek tilida xabar yozing...');
            }
        });
    </script>
    <script src="/admin-news-form.js"></script>
</body>

</html>